set $mod Mod4
set $left j
set $down h
set $up k
set $right l

set $term alacritty
# set $menu dmenu_path | dmenu -fn 'Hack-14' -nb '#282A2E' -nf '#C5C8C6' -sb '#F0C674' -sf '#282A2E' | xargs swaymsg exec --
set $menu fuzzel

default_border none

floating_modifier $mod normal

input * xkb_numlock enable

bindsym --to-code $mod+Return exec $term
bindsym --to-code $mod+Shift+q kill
bindsym --to-code $mod+d exec $menu
bindsym --to-code $mod+Shift+c reload
bindsym --to-code $mod+Shift+e exec swaynag -t warning -m 'You pressed the exit shortcut. Do you really want to exit sway? This will end your Wayland session.' -b 'Yes, exit sway' 'swaymsg exit'
bindsym --to-code $mod+$left focus left
bindsym --to-code $mod+$up focus up
bindsym --to-code $mod+$right focus right
bindsym --to-code $mod+Left focus left
bindsym --to-code $mod+Down focus down
bindsym --to-code $mod+Up focus up
bindsym --to-code $mod+Right focus right
bindsym --to-code $mod+Shift+$left move left
bindsym --to-code $mod+Shift+$down move down
bindsym --to-code $mod+Shift+$up move up
bindsym --to-code $mod+Shift+$right move right
bindsym --to-code $mod+Shift+Left move left
bindsym --to-code $mod+Shift+Down move down
bindsym --to-code $mod+Shift+Up move up
bindsym --to-code $mod+Shift+Right move right
bindsym --to-code $mod+1 workspace number 1
bindsym --to-code $mod+2 workspace number 2
bindsym --to-code $mod+3 workspace number 3
bindsym --to-code $mod+4 workspace number 4
bindsym --to-code $mod+5 workspace number 5
bindsym --to-code $mod+6 workspace number 6
bindsym --to-code $mod+7 workspace number 7
bindsym --to-code $mod+8 workspace number 8
bindsym --to-code $mod+9 workspace number 9
bindsym --to-code $mod+0 workspace number 10
bindsym --to-code $mod+Shift+1 move container to workspace number 1
bindsym --to-code $mod+Shift+2 move container to workspace number 2
bindsym --to-code $mod+Shift+3 move container to workspace number 3
bindsym --to-code $mod+Shift+4 move container to workspace number 4
bindsym --to-code $mod+Shift+5 move container to workspace number 5
bindsym --to-code $mod+Shift+6 move container to workspace number 6
bindsym --to-code $mod+Shift+7 move container to workspace number 7
bindsym --to-code $mod+Shift+8 move container to workspace number 8
bindsym --to-code $mod+Shift+9 move container to workspace number 9
bindsym --to-code $mod+Shift+0 move container to workspace number 10
bindsym --to-code $mod+h splith
bindsym --to-code $mod+v splitv
bindsym --to-code $mod+s layout stacking
bindsym --to-code $mod+w layout tabbed
bindsym --to-code $mod+e layout toggle split
bindsym --to-code $mod+f fullscreen
bindsym --to-code $mod+Shift+space floating toggle
bindsym --to-code $mod+space focus mode_toggle
bindsym --to-code $mod+a focus parent
bindsym --to-code $mod+Shift+minus move scratchpad
bindsym --to-code $mod+minus scratchpad show
bindsym --to-code $mod+c exec cliphist list | fuzzel --dmenu | cliphist decode | wl-copy

mode "resize" {
    bindsym $left resize shrink width 10px
    bindsym $down resize grow height 10px
    bindsym $up resize shrink height 10px
    bindsym $right resize grow width 10px

    bindsym Left resize shrink width 10px
    bindsym Down resize grow height 10px
    bindsym Up resize shrink height 10px
    bindsym Right resize grow width 10px

    bindsym Return mode "default"
    bindsym Escape mode "default"
}
bindsym --to-code $mod+r mode "resize"

bindsym XF86MonBrightnessUp exec light -A 1
bindsym XF86MonBrightnessDown exec light -U 1
bindsym XF86AudioRaiseVolume exec pactl set-sink-volume 0 +5%
bindsym XF86AudioLowerVolume exec pactl set-sink-volume 0 -5%
bindsym XF86AudioMute exec pactl set-sink-mute 0 toggle
bindsym Print exec grim -g "$(slurp)" - | swappy -f -
bindsym Control+Alt+Shift+8 input "type:keyboard" xkb_switch_layout next
bindsym Control+Alt+Shift+9 exec ~/.config/sway/switch_layout_group.sh

set $screenlock ~/.config/sway/lock.sh
bindsym --to-code $mod+x exec $screenlock

# App_id is for Wayland native apps, class is for XWayland apps
for_window [app_id="MEGAsync"] floating enable 
for_window [app_id="cc_receiver"] floating enable 
for_window [app_id="pavucontrol"] floating enable
for_window [app_id="nm-connection-editor"] floating enable
for_window [app_id="swappy"] floating enable
for_window [title="Picture-in-Picture"] floating enable, sticky enable
for_window [window_role="pop-up"] floating enable
for_window [window_role="bubble"] floating enable
for_window [window_role="task_dialog"] floating enable
for_window [window_role="preferences"] floating enable

bar {
    swaybar_command waybar
}    

input type:keyboard {
    xkb_layout us,es,ua,ru
    repeat_delay 200
    repeat_rate 30
}

exec_always ~/.config/sway/layout_manager.sh
exec_always sh -c "sleep 1 && echo 'es' > /tmp/sway_layout_group_state && ~/.config/sway/switch_layout_group.sh"

input 2:14:ETPS/2_Elantech_Touchpad {
    tap enabled
    natural_scroll disabled
}

input 2:14:ETPS/2_Elantech_TrackPoint {
    #accel_profile flat
    accel_profile adaptive
    pointer_accel -0.2
}

# exec gammastep -O 6800 -g 1.1:0.9:1.1
exec gammastep -m wayland -l 55.81:37.72 -t 6800:3500 -g 1.1:0.9:1.1
exec_always fcitx5 -d --replace
exec sleep 3 && megasync
exec dunst

exec swayidle -w \
timeout 300 '$screenlock' \
timeout 600 'swaymsg "output * power off"' \
resume 'swaymsg "output * power on"' \
before-sleep '$screenlock'

exec_always ~/.config/sway/set_wallpaper.sh
exec dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP=sway
exec wl-paste --type text --watch cliphist store
exec wl-paste --type image --watch cliphist store

include /etc/sway/config.d/*
exec_always "systemctl --user import-environment WAITING_FOR_WAYLAND_DISPLAY"
